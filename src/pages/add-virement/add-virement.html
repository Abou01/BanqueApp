<!--
  Generated template for the AddVirementPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <bank-navbar></bank-navbar>
  <ion-navbar>
    <ion-title>Ajouter un virement</ion-title>
  </ion-navbar>

</ion-header>

<ion-content padding>
  <p ion-text color="danger" *ngIf="hasError">{{errorMessage}}</p>

  <form #form="ngForm" (ngSubmit)="OnAddNewVir(form)">
  <ion-list>
    <ion-item>
      <ion-toggle [(ngModel)]="isVirementAuto" [ngModelOptions]="{standalone: true}"></ion-toggle>
      <ion-label>
        Virement Automatique
      </ion-label>
    </ion-item>  
    <ion-item>
      <ion-label floating>Intitul√©</ion-label>
      <ion-input type="text" [(ngModel)]="newVir.intitule" name="intitule"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label floating>Somme</ion-label>
      <ion-input type="text" [(ngModel)]="newVir.somme" name="somme"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label floating>Description</ion-label>
      <ion-input type="text" [(ngModel)]="newVir.description" name="description"></ion-input>
    </ion-item>

    <ion-item *ngIf=isVirementAuto [ngClass]="{'DateFadeIn':isVirementAuto}">
      <ion-label>Date</ion-label>
      <ion-datetime displayFormat="MMM DD YYYY" [(ngModel)]="newVir.date" name="virDate"></ion-datetime>
    </ion-item>

  </ion-list>

  <select [(ngModel)]="newVir.destinataire" name="destinataire">
  <option *ngFor="let beneficiaire of beneficiaires" 
  [ngValue]="beneficiaire._id"   
  [attr.selected]="newVir.destinataire.username==beneficiaire.username ? true : null">
    {{beneficiaire.username}}
  </option></select>

  <button ion-button  type="submit" block>Ajouter</button>
  </form>
</ion-content>
